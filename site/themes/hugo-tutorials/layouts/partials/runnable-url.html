{{ $protocol  := .Content.Params.protocol }}
{{ $hostName  := .Content.Params.hostName }}
{{ $port      := .Content.Params.port }}
{{ $endPoint  := .Content.Params.endpoint }}
{{ $pathName  := .Content.Params.pathName }}
{{ $search    := .Content.Params.search }}
{{ $hash      := .Content.Params.hash }}

<script>
  // Use pathName, else endPoint, else default to '/query'.
  const pathName = '{{ $pathName }}' ?
    '{{ $pathName }}' :
    '{{ $endPoint }}' ?
    '{{ $endPoint }}' :
    '/query';
  // Initial params are passed to runnable.js.
  HUGO_RUNNABLE_URL_INITIAL_PARAMS = [
    ['hash', '{{ $hash }}' ? '{{ $hash }}' : undefined],
    ['protocol', '{{ $protocol }}' ? '{{ $protocol }}' : undefined],
    ['hostName', '{{ $hostName }}' ? '{{ $hostName }}' : undefined],
    ['port', '{{ $port }}' ? '{{ $port }}' : undefined],
    [
      'pathName',
      pathName
    ],
    ['search', '{{ $search }}' ? '{{ $search }}' : undefined]
  ];
</script>

<!-- Endpoint Button -->
<span class="pane-title">
  Endpoint: <button id="runnable-url-endpoint" type="button" class="code-btn primary" data-toggle="modal"
    data-target="#runnable-url-modal">
    ...
  </button>
</span>

<!-- Modal -->
<div class="modal fade runnable-url-modal" id="runnable-url-modal" tabindex="-1" role="dialog"
  aria-labelledby="runnable-url-modal-label" aria-hidden="true">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="runnable-url-modal-label">Change Dgraph Alpha URLs</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
          <form>
            <table class="table table-striped">
              <thead class="thead-dark">
                <tr>
                  <th scope="col">Type</th>
                  <th scope="col" class="col-11">URL</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row" class="align-middle py-1">Alter</th>
                  <td class="py-1">
                    <input type="text" class="form-control" data-module="runnable-url" data-path-type="alter"
                      data-default="http://127.0.0.1:8080/alter" placeholder="http://127.0.0.1:8080/alter">
                  </td>
                </tr>
                <tr>
                  <th scope="row" class="align-middle py-1">Commit</th>
                  <td class="py-1">
                    <input type="text" class="form-control" data-module="runnable-url" data-path-type="commit"
                      data-default="http://127.0.0.1:8080/commit" placeholder="http://127.0.0.1:8080/commit">
                  </td>
                </tr>
                <tr>
                  <th scope="row" class="align-middle py-1">Mutate</th>
                  <td class="py-1">
                    <input type="text" class="form-control" data-module="runnable-url" data-path-type="mutate"
                      data-default="http://127.0.0.1:8080/mutate" placeholder="http://127.0.0.1:8080/mutate">
                  </td>
                </tr>
                <tr>
                  <th scope="row" class="align-middle py-1">Query</th>
                  <td class="py-1">
                    <input type="text" class="form-control" data-module="runnable-url" data-path-type="query"
                      data-default="http://127.0.0.1:8080/query" placeholder="http://127.0.0.1:8080/query">
                  </td>
                </tr>
              </tbody>
            </table>
          </form>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="load-defaults" class="code-btn">Load Defaults</button>
        <button type="button" class="code-btn" data-dismiss="modal">Close</button>
        <button type="button" id="save" class="code-btn primary" data-dismiss="modal">Save</button>
      </div>
    </div>
  </div>
</div>